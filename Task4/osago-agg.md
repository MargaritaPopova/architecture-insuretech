
### Требуется ли ему своё хранилище данных?
Свое хранилище данных osago-aggregator'у не потребуется, так как это динамический расчет, ситуация у клиента и у страховщика может меняться
очень быстро. Но можно закэшировать результат расчета, например на день.


### Определите средство интеграции между сервисами core-app и osago-aggregator. 
Для взаимодействия между osago-aggregator и core-app нужно выбрать асинхронное взаимодействие по типу "точка-точка".
Это обосновано тем, что "синхронные взаимодействия, как правило, рекомендуется использовать в ситуациях, 
когда ответ нужен в режиме реального времени. Чаще всего такая необходимость продиктована требованием отобразить 
какую-то информацию пользователю на UI. При этом UX построен таким образом, что информацию пользователю нельзя 
доставить позже — например, отправить в виде уведомления" (с) Практикум. У нас как раз такая ситуация - 
бизнесу важно, чтобы на экране пользователя предложения от каждой страховой компании отображались сразу, как только 
от неё пришёл ответ. 

### Определите средство интеграции между веб-приложением и core-app. 
Веб-приложение и core-app должны взаимодействовать по типу server-push, для этого подойдет технология Websockets, так как
пользователю нужно видеть ответы от страховых в реальном времени. Однако максимальное время ожидания ответа 
от страховой - 60 секунд, довольно много. Как вариант, можно сразу вывесить пользователю плашку типа "Обрабатываем ваш запрос,
это может занять до одной минуты", а по истечении таймаута вернуть только то, что удалось получить от партнеров.

### В зависимости от выбранных средств интеграции подумайте, требуется ли где-то применение паттернов отказоустойчивости:
Конечно, потребуются как минимум Retry и Timeout, также поможет Circuit Breaker. Количество ретраев и время ожидания между ними должны зависеть
от того, какие ошибки приходят от страховой.  Circuit Breaker пригодится, если какой-то сервис очень долго не отвечает 
или явно пятисотит. 


### Синхронизация между инстансами 
Так как у нас сервисы задеплоены в нескольких экземплярах, потребуется какая-то синхронизация между 
экземплярами. Запросы к одному и тому же АПИ страховой могут улететь больше одного раза. Это, с одной стороны,
ненужная нагрузка, с другой, так мы можем упереться в лимиты запросов со стороны страховой. Здесь может помочь
кэш, например Redis, в нем можно сохранять данные о запросах, присвоив им идентификаторы, чтобы не повторяться. 

https://app.diagrams.net/?title=InsureTech_C4_Task4.drawio.xml&client=1#G1aM6ktZY6YmMSm_zpcF03imjDn0nqWR4S#%7B%22pageId%22%3A%22-FQbQIRzEgXYEJ3rUFKh%22%7D
или
https://drive.google.com/file/d/1aM6ktZY6YmMSm_zpcF03imjDn0nqWR4S/view?usp=sharing